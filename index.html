<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Music Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f4f8; /* Light gray-blue background */
            margin: 0;
            padding: 16px; /* Added padding for smaller screens */
        }
        .music-player {
            background-color: #ffffff;
            padding: 24px; /* Reduced padding slightly */
            border-radius: 16px; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 6px 10px rgba(0, 0, 0, 0.06);
            width: 100%;
            max-width: 400px; /* Max width for the player */
            transition: all 0.3s ease-in-out;
        }
        .music-player:hover {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15), 0 8px 15px rgba(0, 0, 0, 0.08);
        }
        .track-info {
            text-align: center;
            margin-bottom: 20px;
        }
        .track-title {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            color: #1f2937; /* Darker gray */
            margin-bottom: 4px;
        }
        .track-artist {
            font-size: 0.875rem; /* 14px */
            color: #6b7280; /* Medium gray */
        }
        .controls button, .download-button {
            background-color: #3b82f6; /* Tailwind blue-500 */
            color: white;
            border: none;
            border-radius: 9999px; /* pill shape for play/pause */
            padding: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .controls button:hover, .download-button:hover {
            background-color: #2563eb; /* Tailwind blue-600 */
        }
        .controls button:active, .download-button:active {
            transform: scale(0.95);
        }
        /* Removed .controls button i style as SVG handles its own size */

        .seek-bar-container {
            width: 100%;
            margin-bottom: 8px;
        }
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #d1d5db; /* Tailwind gray-300 */
            border-radius: 4px;
            cursor: pointer;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #3b82f6; /* Tailwind blue-500 */
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 2px rgba(0,0,0,0.3);
        }
        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #3b82f6; /* Tailwind blue-500 */
            border-radius: 50%;
            cursor: pointer;
            border: none; /* Important for Firefox */
            box-shadow: 0 0 2px rgba(0,0,0,0.3);
        }
        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem; /* 12px */
            color: #4b5563; /* Tailwind gray-600 */
            margin-bottom: 16px;
        }
        .download-container {
            margin-top: 20px;
            text-align: center;
        }
        .download-button {
            padding: 10px 20px; /* Rectangular shape for download */
            border-radius: 8px; /* Less rounded for download button */
            text-decoration: none; /* Remove underline from <a> tag */
            font-size: 0.875rem; /* 14px */
        }
        .download-button i { /* Style for FA icon in download button */
            margin-right: 8px;
        }
        /* Message Box Styling */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #ef4444; /* Tailwind red-500 */
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out, top 0.3s ease-in-out;
            font-size: 0.875rem;
        }
        .message-box.show {
            opacity: 1;
            top: 30px;
        }
    </style>
</head>
<body>
    <div class="music-player">
        <audio id="audioPlayer" src="abc.mp3" preload="metadata"></audio>

        <div class="track-info">
            <div id="trackTitle" class="track-title">SoundHelix Song 1</div>
            <div id="trackArtist" class="track-artist">T. Schürger</div>
        </div>

        <div class="seek-bar-container">
            <input type="range" id="seekBar" value="0" class="w-full">
        </div>

        <div class="time-display">
            <span id="currentTime">0:00</span>
            <span id="totalDuration">0:00</span>
        </div>

        <div class="controls flex items-center justify-center space-x-4">
            <button id="playPauseButton" aria-label="Play or Pause music">
                <svg id="playIconSVG" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: inline-block;">
                    <path d="M8 5v14l11-7z"></path>
                </svg>
                <svg id="pauseIconSVG" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>
                </svg>
            </button>
        </div>

        <div class="download-container">
            <a id="downloadButton" href="abc.mp3" class="download-button">
                <i class="fas fa-download"></i> Download Track
            </a>
        </div>
    </div>

    <div id="messageBox" class="message-box"></div>

    <script>
        // Get DOM elements
        const audioPlayer = document.getElementById('audioPlayer');
        const playPauseButton = document.getElementById('playPauseButton');
        // const playPauseIcon = playPauseButton.querySelector('i'); // No longer using Font Awesome for play/pause
        const playIconSVG = document.getElementById('playIconSVG');
        const pauseIconSVG = document.getElementById('pauseIconSVG');
        const seekBar = document.getElementById('seekBar');
        const currentTimeDisplay = document.getElementById('currentTime');
        const totalDurationDisplay = document.getElementById('totalDuration');
        const trackTitleDisplay = document.getElementById('trackTitle');
        const trackArtistDisplay = document.getElementById('trackArtist');
        const downloadButton = document.getElementById('downloadButton');
        const messageBox = document.getElementById('messageBox');

        let isPlaying = false;

        // Function to show a message
        function showMessage(message, type = 'error') {
            messageBox.textContent = message;
            messageBox.className = 'message-box show'; // Reset classes and add show
            if (type === 'success') {
                messageBox.style.backgroundColor = '#10b981'; // Tailwind green-500
            } else if (type === 'info') { // Added info type for consistency
                 messageBox.style.backgroundColor = '#3b82f6'; // Tailwind blue-500 for info
            }
            else {
                messageBox.style.backgroundColor = '#ef4444'; // Tailwind red-500
            }
            setTimeout(() => {
                messageBox.classList.remove('show');
            }, 3000);
        }

        // Function to format time (MM:SS)
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // Play/Pause functionality
        function togglePlayPause() {
            if (audioPlayer.paused || audioPlayer.ended) {
                audioPlayer.play().then(() => {
                    // playPauseIcon.classList.remove('fa-play'); // Old FA logic
                    // playPauseIcon.classList.add('fa-pause');   // Old FA logic
                    playIconSVG.style.display = 'none';
                    pauseIconSVG.style.display = 'inline-block';
                    isPlaying = true;
                }).catch(error => {
                    console.error("Error playing audio:", error);
                    showMessage("Error: Could not play audio. Check console for details.");
                    // Reset icon if play fails
                    // playPauseIcon.classList.remove('fa-pause'); // Old FA logic
                    // playPauseIcon.classList.add('fa-play');   // Old FA logic
                    playIconSVG.style.display = 'inline-block';
                    pauseIconSVG.style.display = 'none';
                    isPlaying = false;
                });
            } else {
                audioPlayer.pause();
                // playPauseIcon.classList.remove('fa-pause'); // Old FA logic
                // playPauseIcon.classList.add('fa-play');   // Old FA logic
                playIconSVG.style.display = 'inline-block';
                pauseIconSVG.style.display = 'none';
                isPlaying = false;
            }
        }

        // Update seek bar and time display
        function updateProgress() {
            if (audioPlayer.duration) {
                const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                seekBar.value = progress;
                currentTimeDisplay.textContent = formatTime(audioPlayer.currentTime);
            }
        }

        // Set seek bar
        function setSeek(e) {
            if (audioPlayer.duration) {
                const newTime = (e.target.value / 100) * audioPlayer.duration;
                audioPlayer.currentTime = newTime;
            } else {
                 showMessage("Audio metadata not loaded yet. Please wait.", "info");
            }
        }

        // Event listeners
        playPauseButton.addEventListener('click', togglePlayPause);
        seekBar.addEventListener('input', setSeek); // 'input' for live update while dragging
        audioPlayer.addEventListener('timeupdate', updateProgress);

        audioPlayer.addEventListener('loadedmetadata', () => {
            totalDurationDisplay.textContent = formatTime(audioPlayer.duration);
            seekBar.value = 0; // Reset seek bar on new track load
            currentTimeDisplay.textContent = formatTime(0);
        });

        audioPlayer.addEventListener('ended', () => {
            // playPauseIcon.classList.remove('fa-pause'); // Old FA logic
            // playPauseIcon.classList.add('fa-play');   // Old FA logic
            playIconSVG.style.display = 'inline-block';
            pauseIconSVG.style.display = 'none';
            isPlaying = false;
            audioPlayer.currentTime = 0; // Reset to beginning
            seekBar.value = 0; // Reset seek bar
        });

        // Handle audio load errors
        audioPlayer.addEventListener('error', (e) => {
            console.error("Audio loading error:", e);
            let errorMessage = "Error loading audio file.";
            if (audioPlayer.error) {
                switch (audioPlayer.error.code) {
                    case MediaError.MEDIA_ERR_ABORTED:
                        errorMessage = 'Audio playback aborted.';
                        break;
                    case MediaError.MEDIA_ERR_NETWORK:
                        errorMessage = 'A network error caused the audio download to fail.';
                        break;
                    case MediaError.MEDIA_ERR_DECODE:
                        errorMessage = 'The audio playback was aborted due to a corruption problem or because the audio used features your browser did not support.';
                        break;
                    case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:
                        errorMessage = 'The audio could not be loaded, either because the server or network failed or because the format is not supported.';
                        break;
                    default:
                        errorMessage = 'An unknown error occurred.';
                        break;
                }
            }
            showMessage(errorMessage);
            totalDurationDisplay.textContent = "Error";
            playPauseButton.disabled = true; // Disable play if audio fails
            seekBar.disabled = true;
            // Ensure correct icon is shown on error
            playIconSVG.style.display = 'inline-block';
            pauseIconSVG.style.display = 'none';
        });

        // Ensure the page is fully loaded before enabling controls, especially if metadata takes time
        window.addEventListener('load', () => {
            if (audioPlayer.readyState >= 2) { // HAVE_CURRENT_DATA or more
                 totalDurationDisplay.textContent = formatTime(audioPlayer.duration);
            }
             // If using a placeholder, it's good to inform the user.
            if (audioPlayer.src.includes("YOUR_MUSIC_FILE.mp3")) { // Check if the placeholder URL is still there
                showMessage("Please replace 'YOUR_MUSIC_FILE.mp3' with a valid audio URL in the HTML.", "info");
                 playPauseButton.disabled = true; // Keep controls disabled if using placeholder
                 seekBar.disabled = true;
            } else if (audioPlayer.readyState < 2) { // If not placeholder but not ready
                playPauseButton.disabled = true;
                seekBar.disabled = true;
            } else {
                playPauseButton.disabled = false;
                seekBar.disabled = false;
            }
        });
    </script>
</body>
</html>

